parser_version('7306d13499ba281a6e336c006d9fb23204624daa').
classical_b('Pdpa',['/home/joe/dev/smucclaw/sandbox/joe/bmethod/contract/Pdpa.mch','/home/joe/dev/smucclaw/sandbox/joe/bmethod/contract/CommonDefs.def','/home/joe/dev/smucclaw/sandbox/joe/bmethod/contract/AbstractContract.mch']).
machine(abstract_machine(p5(3,1,1,215,4),system(p4(3,1,1,7)),machine_header(p4(3,1,8,51),'AbstractContract',[identifier(p4(3,1,25,30),'Actor'),identifier(p4(3,1,32,40),'RuleName'),identifier(p4(3,1,42,51),'EventName')]),[definitions(p5(3,34,1,35,20),[expression_definition(p4(2,30,3,27),'Some',[],lambda(p4(2,30,11,27),[identifier(p4(2,30,13,14),x)],definition(p4(2,30,17,20),'Top',[]),set_extension(p4(2,30,23,26),[identifier(p4(2,30,24,25),x)]))),predicate_definition(p4(2,2,3,21),'Top',[],equal(p4(2,2,10,21),boolean_true(p4(2,2,10,14)),boolean_true(p4(2,2,17,21)))),predicate_definition(p4(2,3,3,25),'Bottom',[],equal(p4(2,3,13,25),boolean_true(p4(2,3,13,17)),boolean_false(p4(2,3,20,25)))),expression_definition(p5(2,5,3,9,4),'Event',[],struct(p5(2,5,12,9,4),[rec_entry(p4(2,6,5,21),identifier(p4(2,6,5,9),name),identifier(p4(2,6,12,21),'EventName')),rec_entry(p4(2,7,5,25),identifier(p4(2,7,5,18),is_preemptive),bool_set(p4(2,7,21,25))),rec_entry(p4(2,8,5,27),identifier(p4(2,8,5,22),initial_timer_val),natural1_set(p4(2,8,25,27)))])),expression_definition(p4(2,28,3,32),'Option',[identifier(p4(2,28,10,11),'T')],union(p4(2,28,16,32),set_extension(p4(2,28,16,22),[definition(p4(2,28,17,21),'None',[])]),image(p4(2,28,25,32),definition(p4(2,28,25,29),'Some',[]),identifier(p4(2,28,30,31),'T')))),expression_definition(p5(2,11,3,16,4),'Rule',[],struct(p5(2,11,11,16,4),[rec_entry(p4(2,12,5,20),identifier(p4(2,12,5,9),name),identifier(p4(2,12,12,20),'RuleName')),rec_entry(p4(2,13,5,31),identifier(p4(2,13,5,20),possible_actors),pow_subset(p4(2,13,23,31),identifier(p4(2,13,25,30),'Actor'))),rec_entry(p4(2,14,5,22),identifier(p4(2,14,5,12),deontic),identifier(p4(2,14,15,22),'Deontic')),rec_entry(p4(2,15,5,18),identifier(p4(2,15,5,10),event),definition(p4(2,15,13,18),'Event',[]))])),predicate_definition(p5(2,20,3,25,6),exists_active_rule,[identifier(p4(2,20,22,30),deontics),identifier(p4(2,20,32,42),event_name),identifier(p4(2,20,44,49),actor)],exists(p5(2,21,5,25,6),[identifier(p4(2,21,7,11),rule)],conjunct(p5(2,21,14,24,35),[member(p4(2,21,14,26),identifier(p4(2,21,14,18),rule),identifier(p4(2,21,21,26),rules)),member(p4(2,22,7,45),couple(p4(2,22,7,25),[record_field(p4(2,22,8,17),identifier(p4(2,22,8,12),rule),identifier(p4(2,22,13,17),name)),identifier(p4(2,22,19,24),actor)]),domain(p4(2,22,28,45),identifier(p4(2,22,32,44),active_rules))),member(p4(2,23,7,30),record_field(p4(2,23,7,19),identifier(p4(2,23,7,11),rule),identifier(p4(2,23,12,19),deontic)),identifier(p4(2,23,22,30),deontics)),equal(p4(2,24,7,35),record_field(p4(2,24,7,22),record_field(p4(2,24,7,17),identifier(p4(2,24,7,11),rule),identifier(p4(2,24,12,17),event)),identifier(p4(2,24,18,22),name)),identifier(p4(2,24,25,35),event_name))]))),expression_definition(p4(2,29,3,12),'None',[],empty_set(p4(2,29,11,12))),expression_definition(p4(2,18,3,45),get_rule_name,[],lambda(p4(2,18,20,45),[identifier(p4(2,18,22,26),rule)],definition(p4(2,18,29,32),'Top',[]),record_field(p4(2,18,35,44),identifier(p4(2,18,35,39),rule),identifier(p4(2,18,40,44),name))))]),sets(p5(3,37,1,44,4),[enumerated_set(p5(3,38,3,44,4),'Deontic',[identifier(p4(3,39,5,8),'COb'),identifier(p4(3,40,5,9),'NCOb'),identifier(p4(3,41,5,12),'CProhib'),identifier(p4(3,42,5,13),'NCProhib'),identifier(p4(3,43,5,9),'Perm')])]),constants(p5(3,46,1,47,22),[identifier(p4(3,47,3,22),compatible_deontics)]),properties(p5(3,49,1,56,4),equal(p5(3,50,3,56,4),identifier(p4(3,50,3,22),compatible_deontics),lambda(p5(3,50,25,56,4),[identifier(p4(3,50,27,35),deontic1),identifier(p4(3,50,37,45),deontic2)],definition(p4(3,50,48,51),'Top',[]),convert_bool(p5(3,51,5,55,7),member(p5(3,51,10,55,6),set_extension(p4(3,51,10,30),[identifier(p4(3,51,11,19),deontic1),identifier(p4(3,51,21,29),deontic2)]),set_extension(p5(3,51,33,55,6),[set_extension(p4(3,52,7,12),[identifier(p4(3,52,8,11),'COb')]),set_extension(p4(3,52,14,20),[identifier(p4(3,52,15,19),'NCOb')]),set_extension(p4(3,52,22,33),[identifier(p4(3,52,23,26),'COb'),identifier(p4(3,52,28,32),'NCOb')]),set_extension(p4(3,53,7,16),[identifier(p4(3,53,8,15),'CProhib')]),set_extension(p4(3,53,18,28),[identifier(p4(3,53,19,27),'NCProhib')]),set_extension(p4(3,53,30,49),[identifier(p4(3,53,31,38),'CProhib'),identifier(p4(3,53,40,48),'NCProhib')]),set_extension(p4(3,54,7,18),[identifier(p4(3,54,8,11),'COb'),identifier(p4(3,54,13,17),'Perm')]),set_extension(p4(3,54,20,32),[identifier(p4(3,54,21,25),'NCOb'),identifier(p4(3,54,27,31),'Perm')]),set_extension(p4(3,54,34,40),[identifier(p4(3,54,35,39),'Perm')])])))))),variables(p5(3,60,1,61,35),[identifier(p4(3,61,3,8),rules),identifier(p4(3,61,10,21),breached_by),identifier(p4(3,61,23,35),active_rules)]),invariant(p5(3,63,1,88,4),conjunct(p5(3,64,3,88,4),[subset(p4(3,64,3,15),identifier(p4(3,64,3,8),rules),definition(p4(3,64,11,15),'Rule',[])),member(p4(3,65,3,30),identifier(p4(3,65,3,14),breached_by),definition(p4(3,65,17,30),'Option',[identifier(p4(3,65,24,29),'Actor')])),member(p4(3,67,3,38),identifier(p4(3,67,3,15),active_rules),relations(p4(3,67,18,38),mult_or_cart(p4(3,67,18,34),identifier(p4(3,67,18,26),'RuleName'),identifier(p4(3,67,29,34),'Actor')),natural_set(p4(3,67,37,38)))),forall(p5(3,68,3,76,4),[identifier(p4(3,68,5,14),rule_name),identifier(p4(3,68,16,21),actor),identifier(p4(3,68,23,32),timer_val)],implication(p5(3,69,5,75,6),member(p4(3,69,5,49),couple(p4(3,69,5,34),[identifier(p4(3,69,6,15),rule_name),identifier(p4(3,69,17,22),actor),identifier(p4(3,69,24,33),timer_val)]),identifier(p4(3,69,37,49),active_rules)),exists(p5(3,70,5,75,6),[identifier(p4(3,70,7,11),rule)],conjunct(p5(3,70,14,74,47),[member(p4(3,70,14,26),identifier(p4(3,70,14,18),rule),identifier(p4(3,70,21,26),rules)),equal(p4(3,71,7,28),record_field(p4(3,71,7,16),identifier(p4(3,71,7,11),rule),identifier(p4(3,71,12,16),name)),identifier(p4(3,71,19,28),rule_name)),member(p4(3,72,7,35),identifier(p4(3,72,7,12),actor),record_field(p4(3,72,15,35),identifier(p4(3,72,15,19),rule),identifier(p4(3,72,20,35),possible_actors))),less_equal(p4(3,74,7,47),identifier(p4(3,74,7,16),timer_val),record_field(p4(3,74,19,47),record_field(p4(3,74,19,29),identifier(p4(3,74,19,23),rule),identifier(p4(3,74,24,29),event)),identifier(p4(3,74,30,47),initial_timer_val)))])))),forall(p5(3,82,3,88,4),[identifier(p4(3,82,5,10),rule1),identifier(p4(3,82,12,17),rule2),identifier(p4(3,82,19,24),actor)],implication(p5(3,83,6,87,61),conjunct(p5(3,83,6,86,42),[not_equal(p4(3,83,6,19),identifier(p4(3,83,6,11),rule1),identifier(p4(3,83,14,19),rule2)),subset(p4(3,84,7,29),set_extension(p4(3,84,7,21),[identifier(p4(3,84,8,13),rule1),identifier(p4(3,84,15,20),rule2)]),identifier(p4(3,84,24,29),rules)),subset(p4(3,85,7,69),set_extension(p4(3,85,7,49),[couple(p4(3,85,8,27),[record_field(p4(3,85,9,19),identifier(p4(3,85,9,14),rule1),identifier(p4(3,85,15,19),name)),identifier(p4(3,85,21,26),actor)]),couple(p4(3,85,29,48),[record_field(p4(3,85,30,40),identifier(p4(3,85,30,35),rule2),identifier(p4(3,85,36,40),name)),identifier(p4(3,85,42,47),actor)])]),domain(p4(3,85,52,69),identifier(p4(3,85,56,68),active_rules))),equal(p4(3,86,7,42),record_field(p4(3,86,7,23),record_field(p4(3,86,7,18),identifier(p4(3,86,7,12),rule1),identifier(p4(3,86,13,18),event)),identifier(p4(3,86,19,23),name)),record_field(p4(3,86,26,42),record_field(p4(3,86,26,37),identifier(p4(3,86,26,31),rule2),identifier(p4(3,86,32,37),event)),identifier(p4(3,86,38,42),name)))]),equal(p4(3,87,5,61),function(p4(3,87,5,54),identifier(p4(3,87,5,24),compatible_deontics),[record_field(p4(3,87,25,38),identifier(p4(3,87,25,30),rule1),identifier(p4(3,87,31,38),deontic)),record_field(p4(3,87,40,53),identifier(p4(3,87,40,45),rule2),identifier(p4(3,87,46,53),deontic))]),boolean_true(p4(3,87,57,61)))))])),initialisation(p5(3,90,1,91,49),assign(p4(3,91,3,49),[identifier(p4(3,91,3,8),rules),identifier(p4(3,91,10,21),breached_by),identifier(p4(3,91,23,35),active_rules)],[empty_set(p4(3,91,39,40)),definition(p4(3,91,42,46),'None',[]),empty_set(p4(3,91,48,49))])),operations(p5(3,93,1,213,8),[operation(p5(3,94,3,99,8),identifier(p5(3,94,3,99,8),add_rules),[],[identifier(p4(3,94,13,25),rules_to_add)],precondition(p5(3,95,5,99,8),subset(p4(3,96,7,26),identifier(p4(3,96,7,19),rules_to_add),definition(p4(3,96,22,26),'Rule',[])),assign(p4(3,98,7,36),[identifier(p4(3,98,7,12),rules)],[union(p4(3,98,16,36),identifier(p4(3,98,16,21),rules),identifier(p4(3,98,24,36),rules_to_add))]))),operation(p5(3,101,3,106,8),identifier(p5(3,101,3,106,8),remove_rules),[],[identifier(p4(3,101,16,31),rules_to_remove)],precondition(p5(3,102,5,106,8),subset(p4(3,103,7,29),identifier(p4(3,103,7,22),rules_to_remove),definition(p4(3,103,25,29),'Rule',[])),assign(p4(3,105,7,39),[identifier(p4(3,105,7,12),rules)],[set_subtraction(p4(3,105,16,39),identifier(p4(3,105,16,21),rules),identifier(p4(3,105,24,39),rules_to_remove))]))),operation(p5(3,109,3,120,8),identifier(p5(3,109,3,120,8),tick),[],[],precondition(p5(3,110,5,120,8),conjunct(p5(3,113,7,115,32),[not_equal(p4(3,113,7,16),identifier(p4(3,113,7,12),rules),empty_set(p4(3,113,15,16))),equal(p4(3,114,7,25),identifier(p4(3,114,7,18),breached_by),definition(p4(3,114,21,25),'None',[])),member(p4(3,115,7,32),range(p4(3,115,7,24),identifier(p4(3,115,11,23),active_rules)),pow_subset(p4(3,115,27,32),natural1_set(p4(3,115,29,31))))]),assign(p5(3,117,7,119,8),[identifier(p4(3,117,7,19),active_rules)],[comprehension_set(p5(3,117,23,119,8),[identifier(p4(3,117,24,33),rule_name),identifier(p4(3,117,35,40),actor),identifier(p4(3,117,42,51),timer_val)],member(p4(3,118,9,57),couple(p4(3,118,9,42),[identifier(p4(3,118,10,19),rule_name),identifier(p4(3,118,21,26),actor),add(p4(3,118,28,41),identifier(p4(3,118,28,37),timer_val),integer(p4(3,118,40,41),1))]),identifier(p4(3,118,45,57),active_rules)))]))),operation(p5(3,131,3,158,8),identifier(p5(3,131,3,158,8),event_happened),[identifier(p4(3,131,3,22),relevant_rule_names)],[identifier(p4(3,131,40,50),event_name),identifier(p4(3,131,52,57),actor)],any(p5(3,132,5,158,8),[identifier(p4(3,132,9,23),relevant_rules)],conjunct(p5(3,133,7,142,8),[equal(p4(3,133,7,25),identifier(p4(3,133,7,18),breached_by),definition(p4(3,133,21,25),'None',[])),not_equal(p4(3,134,7,25),identifier(p4(3,134,7,21),relevant_rules),empty_set(p4(3,134,24,25))),equal(p5(3,135,7,142,8),identifier(p4(3,135,7,21),relevant_rules),comprehension_set(p5(3,135,24,142,8),[identifier(p4(3,135,25,29),rule)],conjunct(p5(3,136,9,141,10),[member(p4(3,136,9,21),identifier(p4(3,136,9,13),rule),identifier(p4(3,136,16,21),rules)),exists(p5(3,137,9,141,10),[identifier(p4(3,137,11,20),timer_val)],conjunct(p5(3,138,11,140,39),[member(p4(3,138,11,55),couple(p4(3,138,11,40),[record_field(p4(3,138,12,21),identifier(p4(3,138,12,16),rule),identifier(p4(3,138,17,21),name)),identifier(p4(3,138,23,28),actor),identifier(p4(3,138,30,39),timer_val)]),identifier(p4(3,138,43,55),active_rules)),implication(p4(3,139,12,60),equal(p4(3,139,12,44),record_field(p4(3,139,12,36),record_field(p4(3,139,12,22),identifier(p4(3,139,12,16),rule),identifier(p4(3,139,17,22),event)),identifier(p4(3,139,23,36),is_preemptive)),boolean_false(p4(3,139,39,44))),equal(p4(3,139,47,60),identifier(p4(3,139,47,56),timer_val),integer(p4(3,139,59,60),0))),equal(p4(3,140,11,39),record_field(p4(3,140,11,26),record_field(p4(3,140,11,21),identifier(p4(3,140,11,15),rule),identifier(p4(3,140,16,21),event)),identifier(p4(3,140,22,26),name)),identifier(p4(3,140,29,39),event_name))]))])))]),parallel(p5(3,144,7,157,10),[assign(p4(3,144,7,59),[identifier(p4(3,144,7,26),relevant_rule_names)],[image(p4(3,144,30,59),definition(p4(3,144,30,43),get_rule_name,[]),identifier(p4(3,144,44,58),relevant_rules))]),if(p5(3,145,7,157,10),exists(p4(3,145,10,67),[identifier(p4(3,145,12,16),rule)],conjunct(p4(3,145,19,66),[member(p4(3,145,19,40),identifier(p4(3,145,19,23),rule),identifier(p4(3,145,26,40),relevant_rules)),equal(p4(3,145,43,66),record_field(p4(3,145,43,55),identifier(p4(3,145,43,47),rule),identifier(p4(3,145,48,55),deontic)),identifier(p4(3,145,58,66),'NCProhib'))])),assign(p4(3,147,9,52),[identifier(p4(3,147,9,20),breached_by),identifier(p4(3,147,22,34),active_rules)],[function(p4(3,147,38,49),definition(p4(3,147,38,42),'Some',[]),[identifier(p4(3,147,43,48),actor)]),empty_set(p4(3,147,51,52))]),[],let(p5(3,149,9,156,12),[identifier(p4(3,149,13,22),to_remove)],equal(p5(3,150,11,153,12),identifier(p4(3,150,11,20),to_remove),comprehension_set(p5(3,150,23,153,12),[identifier(p4(3,150,24,33),rule_name),identifier(p4(3,150,35,40),actor),identifier(p4(3,150,42,51),timer_val)],conjunct(p5(3,151,13,152,68),[member(p4(3,151,13,57),couple(p4(3,151,13,42),[identifier(p4(3,151,14,23),rule_name),identifier(p4(3,151,25,30),actor),identifier(p4(3,151,32,41),timer_val)]),identifier(p4(3,151,45,57),active_rules)),exists(p4(3,152,13,68),[identifier(p4(3,152,15,19),rule)],conjunct(p4(3,152,22,67),[member(p4(3,152,22,43),identifier(p4(3,152,22,26),rule),identifier(p4(3,152,29,43),relevant_rules)),equal(p4(3,152,46,67),record_field(p4(3,152,46,55),identifier(p4(3,152,46,50),rule),identifier(p4(3,152,51,55),name)),identifier(p4(3,152,58,67),rule_name))]))]))),assign(p4(3,155,11,51),[identifier(p4(3,155,11,23),active_rules)],[set_subtraction(p4(3,155,27,51),identifier(p4(3,155,27,39),active_rules),identifier(p4(3,155,42,51),to_remove))])))]))),operation(p5(3,160,3,185,8),identifier(p5(3,160,3,185,8),event_timeout),[identifier(p4(3,160,3,22),relevant_rule_names)],[identifier(p4(3,160,39,49),event_name),identifier(p4(3,160,51,56),actor)],any(p5(3,161,5,185,8),[identifier(p4(3,161,9,23),relevant_rules)],conjunct(p5(3,162,7,168,8),[equal(p4(3,162,7,25),identifier(p4(3,162,7,18),breached_by),definition(p4(3,162,21,25),'None',[])),not_equal(p4(3,163,7,25),identifier(p4(3,163,7,21),relevant_rules),empty_set(p4(3,163,24,25))),equal(p5(3,164,7,168,8),identifier(p4(3,164,7,21),relevant_rules),comprehension_set(p5(3,164,24,168,8),[identifier(p4(3,164,25,29),rule)],conjunct(p5(3,165,9,167,37),[member(p4(3,165,9,21),identifier(p4(3,165,9,13),rule),identifier(p4(3,165,16,21),rules)),member(p4(3,166,9,45),couple(p4(3,166,9,30),[record_field(p4(3,166,10,19),identifier(p4(3,166,10,14),rule),identifier(p4(3,166,15,19),name)),identifier(p4(3,166,21,26),actor),integer(p4(3,166,28,29),0)]),identifier(p4(3,166,33,45),active_rules)),equal(p4(3,167,9,37),record_field(p4(3,167,9,24),record_field(p4(3,167,9,19),identifier(p4(3,167,9,13),rule),identifier(p4(3,167,14,19),event)),identifier(p4(3,167,20,24),name)),identifier(p4(3,167,27,37),event_name))])))]),parallel(p5(3,170,7,184,10),[assign(p4(3,170,7,59),[identifier(p4(3,170,7,26),relevant_rule_names)],[image(p4(3,170,30,59),definition(p4(3,170,30,43),get_rule_name,[]),identifier(p4(3,170,44,58),relevant_rules))]),if(p5(3,171,7,184,10),exists(p4(3,171,10,63),[identifier(p4(3,171,12,16),rule)],conjunct(p4(3,171,19,62),[member(p4(3,171,19,40),identifier(p4(3,171,19,23),rule),identifier(p4(3,171,26,40),relevant_rules)),equal(p4(3,171,43,62),record_field(p4(3,171,43,55),identifier(p4(3,171,43,47),rule),identifier(p4(3,171,48,55),deontic)),identifier(p4(3,171,58,62),'NCOb'))])),assign(p4(3,173,9,52),[identifier(p4(3,173,9,20),breached_by),identifier(p4(3,173,22,34),active_rules)],[function(p4(3,173,38,49),definition(p4(3,173,38,42),'Some',[]),[identifier(p4(3,173,43,48),actor)]),empty_set(p4(3,173,51,52))]),[],let(p5(3,175,9,183,12),[identifier(p4(3,175,13,22),to_remove)],equal(p5(3,176,11,180,12),identifier(p4(3,176,11,20),to_remove),comprehension_set(p5(3,176,23,180,12),[identifier(p4(3,176,24,33),rule_name),identifier(p4(3,176,35,40),actor),identifier(p4(3,176,42,51),timer_val)],conjunct(p5(3,177,13,179,68),[member(p4(3,177,13,57),couple(p4(3,177,13,42),[identifier(p4(3,177,14,23),rule_name),identifier(p4(3,177,25,30),actor),identifier(p4(3,177,32,41),timer_val)]),identifier(p4(3,177,45,57),active_rules)),equal(p4(3,178,13,26),identifier(p4(3,178,13,22),timer_val),integer(p4(3,178,25,26),0)),exists(p4(3,179,13,68),[identifier(p4(3,179,15,19),rule)],conjunct(p4(3,179,22,67),[member(p4(3,179,22,43),identifier(p4(3,179,22,26),rule),identifier(p4(3,179,29,43),relevant_rules)),equal(p4(3,179,46,67),record_field(p4(3,179,46,55),identifier(p4(3,179,46,50),rule),identifier(p4(3,179,51,55),name)),identifier(p4(3,179,58,67),rule_name))]))]))),assign(p4(3,182,11,51),[identifier(p4(3,182,11,23),active_rules)],[set_subtraction(p4(3,182,27,51),identifier(p4(3,182,27,39),active_rules),identifier(p4(3,182,42,51),to_remove))])))]))),operation(p5(3,187,3,201,8),identifier(p5(3,187,3,201,8),trigger),[],[identifier(p4(3,187,11,19),triggers)],any(p5(3,188,5,201,8),[identifier(p4(3,188,9,23),timed_triggers)],conjunct(p5(3,189,7,198,8),[equal(p4(3,189,7,25),identifier(p4(3,189,7,18),breached_by),definition(p4(3,189,21,25),'None',[])),member(p4(3,190,7,34),identifier(p4(3,190,7,15),triggers),relations(p4(3,190,18,34),identifier(p4(3,190,18,26),'RuleName'),identifier(p4(3,190,29,34),'Actor'))),equal(p5(3,191,7,198,8),identifier(p4(3,191,7,21),timed_triggers),comprehension_set(p5(3,191,24,198,8),[identifier(p4(3,191,25,34),rule_name),identifier(p4(3,191,36,41),actor),identifier(p4(3,191,43,53),timer_val0)],conjunct(p5(3,192,9,197,10),[member(p4(3,192,9,38),couple(p4(3,192,9,27),[identifier(p4(3,192,10,19),rule_name),identifier(p4(3,192,21,26),actor)]),identifier(p4(3,192,30,38),triggers)),exists(p5(3,193,9,197,10),[identifier(p4(3,193,11,15),rule)],conjunct(p5(3,193,18,196,52),[member(p4(3,193,18,30),identifier(p4(3,193,18,22),rule),identifier(p4(3,193,25,30),rules)),equal(p4(3,194,11,32),record_field(p4(3,194,11,20),identifier(p4(3,194,11,15),rule),identifier(p4(3,194,16,20),name)),identifier(p4(3,194,23,32),rule_name)),member(p4(3,195,11,39),identifier(p4(3,195,11,16),actor),record_field(p4(3,195,19,39),identifier(p4(3,195,19,23),rule),identifier(p4(3,195,24,39),possible_actors))),equal(p4(3,196,11,52),identifier(p4(3,196,11,21),timer_val0),record_field(p4(3,196,24,52),record_field(p4(3,196,24,34),identifier(p4(3,196,24,28),rule),identifier(p4(3,196,29,34),event)),identifier(p4(3,196,35,52),initial_timer_val)))]))])))]),assign(p4(3,200,7,52),[identifier(p4(3,200,7,19),active_rules)],[union(p4(3,200,23,52),identifier(p4(3,200,23,35),active_rules),identifier(p4(3,200,38,52),timed_triggers))]))),operation(p5(3,203,3,213,8),identifier(p5(3,203,3,213,8),discharge),[],[identifier(p4(3,203,13,23),discharges)],any(p5(3,204,5,213,8),[identifier(p4(3,204,9,25),timed_discharges)],conjunct(p5(3,205,7,210,8),[equal(p4(3,205,7,25),identifier(p4(3,205,7,18),breached_by),definition(p4(3,205,21,25),'None',[])),member(p4(3,206,7,36),identifier(p4(3,206,7,17),discharges),relations(p4(3,206,20,36),identifier(p4(3,206,20,28),'RuleName'),identifier(p4(3,206,31,36),'Actor'))),equal(p5(3,207,7,210,8),identifier(p4(3,207,7,23),timed_discharges),comprehension_set(p5(3,207,26,210,8),[identifier(p4(3,207,27,36),rule_name),identifier(p4(3,207,38,43),actor),identifier(p4(3,207,45,54),timer_val)],conjunct(p5(3,208,9,209,40),[member(p4(3,208,9,53),couple(p4(3,208,9,38),[identifier(p4(3,208,10,19),rule_name),identifier(p4(3,208,21,26),actor),identifier(p4(3,208,28,37),timer_val)]),identifier(p4(3,208,41,53),active_rules)),member(p4(3,209,9,40),couple(p4(3,209,9,27),[identifier(p4(3,209,10,19),rule_name),identifier(p4(3,209,21,26),actor)]),identifier(p4(3,209,30,40),discharges))])))]),assign(p4(3,212,7,54),[identifier(p4(3,212,7,19),active_rules)],[set_subtraction(p4(3,212,23,54),identifier(p4(3,212,23,35),active_rules),identifier(p4(3,212,38,54),timed_discharges))])))])])).
machine(abstract_machine(p5(1,1,1,170,4),system(p3(1,1,7)),machine_header(p3(1,8,12),'Pdpa',[]),[includes(p3(3,1,53),[machine_reference(p3(3,10,53),'AbstractContract',[identifier(p3(3,27,32),'Actor'),identifier(p3(3,34,42),'RuleName'),identifier(p3(3,44,53),'EventName')])]),promotes(p3(4,1,14),[identifier(p3(4,10,14),tick)]),definitions(p5(1,6,1,7,19),[expression_definition(p4(2,30,3,27),'Some',[],lambda(p4(2,30,11,27),[identifier(p4(2,30,13,14),x)],definition(p4(2,30,17,20),'Top',[]),set_extension(p4(2,30,23,26),[identifier(p4(2,30,24,25),x)]))),predicate_definition(p4(2,2,3,21),'Top',[],equal(p4(2,2,10,21),boolean_true(p4(2,2,10,14)),boolean_true(p4(2,2,17,21)))),predicate_definition(p4(2,3,3,25),'Bottom',[],equal(p4(2,3,13,25),boolean_true(p4(2,3,13,17)),boolean_false(p4(2,3,20,25)))),expression_definition(p5(2,5,3,9,4),'Event',[],struct(p5(2,5,12,9,4),[rec_entry(p4(2,6,5,21),identifier(p4(2,6,5,9),name),identifier(p4(2,6,12,21),'EventName')),rec_entry(p4(2,7,5,25),identifier(p4(2,7,5,18),is_preemptive),bool_set(p4(2,7,21,25))),rec_entry(p4(2,8,5,27),identifier(p4(2,8,5,22),initial_timer_val),natural1_set(p4(2,8,25,27)))])),expression_definition(p4(2,28,3,32),'Option',[identifier(p4(2,28,10,11),'T')],union(p4(2,28,16,32),set_extension(p4(2,28,16,22),[definition(p4(2,28,17,21),'None',[])]),image(p4(2,28,25,32),definition(p4(2,28,25,29),'Some',[]),identifier(p4(2,28,30,31),'T')))),expression_definition(p5(2,11,3,16,4),'Rule',[],struct(p5(2,11,11,16,4),[rec_entry(p4(2,12,5,20),identifier(p4(2,12,5,9),name),identifier(p4(2,12,12,20),'RuleName')),rec_entry(p4(2,13,5,31),identifier(p4(2,13,5,20),possible_actors),pow_subset(p4(2,13,23,31),identifier(p4(2,13,25,30),'Actor'))),rec_entry(p4(2,14,5,22),identifier(p4(2,14,5,12),deontic),identifier(p4(2,14,15,22),'Deontic')),rec_entry(p4(2,15,5,18),identifier(p4(2,15,5,10),event),definition(p4(2,15,13,18),'Event',[]))])),predicate_definition(p5(2,20,3,25,6),exists_active_rule,[identifier(p4(2,20,22,30),deontics),identifier(p4(2,20,32,42),event_name),identifier(p4(2,20,44,49),actor)],exists(p5(2,21,5,25,6),[identifier(p4(2,21,7,11),rule)],conjunct(p5(2,21,14,24,35),[member(p4(2,21,14,26),identifier(p4(2,21,14,18),rule),identifier(p4(2,21,21,26),rules)),member(p4(2,22,7,45),couple(p4(2,22,7,25),[record_field(p4(2,22,8,17),identifier(p4(2,22,8,12),rule),identifier(p4(2,22,13,17),name)),identifier(p4(2,22,19,24),actor)]),domain(p4(2,22,28,45),identifier(p4(2,22,32,44),active_rules))),member(p4(2,23,7,30),record_field(p4(2,23,7,19),identifier(p4(2,23,7,11),rule),identifier(p4(2,23,12,19),deontic)),identifier(p4(2,23,22,30),deontics)),equal(p4(2,24,7,35),record_field(p4(2,24,7,22),record_field(p4(2,24,7,17),identifier(p4(2,24,7,11),rule),identifier(p4(2,24,12,17),event)),identifier(p4(2,24,18,22),name)),identifier(p4(2,24,25,35),event_name))]))),expression_definition(p4(2,29,3,12),'None',[],empty_set(p4(2,29,11,12))),expression_definition(p4(2,18,3,45),get_rule_name,[],lambda(p4(2,18,20,45),[identifier(p4(2,18,22,26),rule)],definition(p4(2,18,29,32),'Top',[]),record_field(p4(2,18,35,44),identifier(p4(2,18,35,39),rule),identifier(p4(2,18,40,44),name))))]),sets(p5(1,9,1,18,4),[enumerated_set(p3(10,3,29),'Actor',[identifier(p3(10,12,15),org),identifier(p3(10,17,22),indiv),identifier(p3(10,24,28),pdpc)]),enumerated_set(p5(1,12,3,14,4),'RuleName',[identifier(p3(13,5,15),'Assessment'),identifier(p3(13,17,27),'NotifyPdpc'),identifier(p3(13,29,40),'NotifyIndiv'),identifier(p3(13,42,61),'ProhibitNotifyIndiv'),identifier(p3(13,63,80),'CannotNotifyIndiv')]),enumerated_set(p5(1,16,3,18,4),'EventName',[identifier(p3(17,5,11),assess),identifier(p3(17,13,24),notify_pdpc),identifier(p3(17,26,38),notify_indiv),identifier(p3(17,40,61),prohibit_notify_indiv)])]),constants(p5(1,20,1,21,8),[identifier(p3(21,2,8),rules0)]),properties(p5(1,23,1,79,4),equal(p5(1,24,3,79,4),identifier(p3(24,3,9),rules0),set_extension(p5(1,24,12,79,4),[rec(p5(1,25,5,34,6),[rec_entry(p3(26,7,24),identifier(p3(26,7,11),name),identifier(p3(26,14,24),'Assessment')),rec_entry(p3(27,7,30),identifier(p3(27,7,22),possible_actors),set_extension(p3(27,25,30),[identifier(p3(27,26,29),org)])),rec_entry(p3(28,7,21),identifier(p3(28,7,14),deontic),identifier(p3(28,17,21),'NCOb')),rec_entry(p5(1,29,7,33,8),identifier(p3(29,7,12),event),rec(p5(1,29,15,33,8),[rec_entry(p3(30,9,22),identifier(p3(30,9,13),name),identifier(p3(30,16,22),assess)),rec_entry(p3(31,9,29),identifier(p3(31,9,22),is_preemptive),boolean_true(p3(31,25,29))),rec_entry(p3(32,9,31),identifier(p3(32,9,26),initial_timer_val),integer(p3(32,29,31),30))]))]),rec(p5(1,36,5,45,6),[rec_entry(p3(37,7,25),identifier(p3(37,7,11),name),identifier(p3(37,14,25),'NotifyIndiv')),rec_entry(p3(38,7,30),identifier(p3(38,7,22),possible_actors),set_extension(p3(38,25,30),[identifier(p3(38,26,29),org)])),rec_entry(p3(39,7,21),identifier(p3(39,7,14),deontic),identifier(p3(39,17,21),'NCOb')),rec_entry(p5(1,40,7,44,8),identifier(p3(40,7,12),event),rec(p5(1,40,15,44,8),[rec_entry(p3(41,9,28),identifier(p3(41,9,13),name),identifier(p3(41,16,28),notify_indiv)),rec_entry(p3(42,9,29),identifier(p3(42,9,22),is_preemptive),boolean_true(p3(42,25,29))),rec_entry(p3(43,9,30),identifier(p3(43,9,26),initial_timer_val),integer(p3(43,29,30),3))]))]),rec(p5(1,47,5,56,6),[rec_entry(p3(48,7,24),identifier(p3(48,7,11),name),identifier(p3(48,14,24),'NotifyPdpc')),rec_entry(p3(49,7,30),identifier(p3(49,7,22),possible_actors),set_extension(p3(49,25,30),[identifier(p3(49,26,29),org)])),rec_entry(p3(50,7,21),identifier(p3(50,7,14),deontic),identifier(p3(50,17,21),'NCOb')),rec_entry(p5(1,51,7,55,8),identifier(p3(51,7,12),event),rec(p5(1,51,15,55,8),[rec_entry(p3(52,9,27),identifier(p3(52,9,13),name),identifier(p3(52,16,27),notify_pdpc)),rec_entry(p3(53,9,29),identifier(p3(53,9,22),is_preemptive),boolean_true(p3(53,25,29))),rec_entry(p3(54,9,30),identifier(p3(54,9,26),initial_timer_val),integer(p3(54,29,30),3))]))]),rec(p5(1,58,5,67,6),[rec_entry(p3(59,7,33),identifier(p3(59,7,11),name),identifier(p3(59,14,33),'ProhibitNotifyIndiv')),rec_entry(p3(60,7,31),identifier(p3(60,7,22),possible_actors),set_extension(p3(60,25,31),[identifier(p3(60,26,30),pdpc)])),rec_entry(p3(61,7,21),identifier(p3(61,7,14),deontic),identifier(p3(61,17,21),'Perm')),rec_entry(p5(1,62,7,66,8),identifier(p3(62,7,12),event),rec(p5(1,62,15,66,8),[rec_entry(p3(63,9,37),identifier(p3(63,9,13),name),identifier(p3(63,16,37),prohibit_notify_indiv)),rec_entry(p3(64,9,29),identifier(p3(64,9,22),is_preemptive),boolean_true(p3(64,25,29))),rec_entry(p3(65,9,30),identifier(p3(65,9,26),initial_timer_val),integer(p3(65,29,30),5))]))]),rec(p5(1,69,5,78,6),[rec_entry(p3(70,7,31),identifier(p3(70,7,11),name),identifier(p3(70,14,31),'CannotNotifyIndiv')),rec_entry(p3(71,7,30),identifier(p3(71,7,22),possible_actors),set_extension(p3(71,25,30),[identifier(p3(71,26,29),org)])),rec_entry(p3(72,7,25),identifier(p3(72,7,14),deontic),identifier(p3(72,17,25),'NCProhib')),rec_entry(p5(1,73,7,77,8),identifier(p3(73,7,12),event),rec(p5(1,73,15,77,8),[rec_entry(p3(74,9,28),identifier(p3(74,9,13),name),identifier(p3(74,16,28),notify_indiv)),rec_entry(p3(75,9,29),identifier(p3(75,9,22),is_preemptive),boolean_true(p3(75,25,29))),rec_entry(p3(76,9,30),identifier(p3(76,9,26),initial_timer_val),integer(p3(76,29,30),5))]))])]))),variables(p5(1,90,1,92,34),[identifier(p3(91,3,10),started),identifier(p3(92,3,19),is_public_agency),identifier(p3(92,21,34),is_notifiable)]),invariant(p5(1,94,1,97,23),conjunct(p5(1,95,3,97,23),[member(p3(95,3,17),identifier(p3(95,3,10),started),bool_set(p3(95,13,17))),member(p3(96,3,34),identifier(p3(96,3,19),is_public_agency),total_function(p3(96,22,34),set_extension(p3(96,22,27),[identifier(p3(96,23,26),org)]),bool_set(p3(96,30,34)))),member(p3(97,3,23),identifier(p3(97,3,16),is_notifiable),bool_set(p3(97,19,23)))])),initialisation(p5(1,99,1,102,25),parallel(p5(1,100,3,102,25),[assign(p3(100,3,19),[identifier(p3(100,3,10),started)],[boolean_false(p3(100,14,19))]),assign(p3(101,3,37),[identifier(p3(101,3,19),is_public_agency)],[set_extension(p3(101,23,37),[couple(p3(101,24,36),[identifier(p3(101,25,28),org),boolean_false(p3(101,30,35))])])]),assign(p3(102,3,25),[identifier(p3(102,3,16),is_notifiable)],[boolean_false(p3(102,20,25))])])),operations(p5(1,104,1,168,6),[operation(p5(1,105,3,116,8),identifier(p5(1,105,3,116,8),start),[],[],precondition(p5(1,106,5,116,8),equal(p3(107,7,22),identifier(p3(107,7,14),started),boolean_false(p3(107,17,22))),sequence(p5(1,109,7,115,10),[parallel(p5(1,109,7,111,23),[assign(p3(109,7,22),[identifier(p3(109,7,14),started)],[boolean_true(p3(109,18,22))]),becomes_element_of(p3(110,7,39),[identifier(p3(110,7,23),is_public_agency)],total_function(p3(110,27,39),set_extension(p3(110,27,32),[identifier(p3(110,28,31),org)]),bool_set(p3(110,35,39)))),operation_call(p3(111,7,16),identifier(p3(111,7,16),add_rules),[],[identifier(p3(111,17,23),rules0)])]),if(p5(1,113,7,115,10),equal(p3(113,10,38),function(p3(113,10,31),identifier(p3(113,10,26),is_public_agency),[identifier(p3(113,27,30),org)]),boolean_true(p3(113,34,38))),operation_call(p3(114,9,16),identifier(p3(114,9,16),trigger),[],[set_extension(p3(114,17,36),[couple(p3(114,18,35),[identifier(p3(114,19,29),'Assessment'),identifier(p3(114,31,34),org)])])]),[],skip(none))]))),operation(p5(1,118,3,130,6),identifier(p5(1,118,3,130,6),assess_happened),[],[identifier(p3(118,19,24),actor)],var(p5(1,118,28,130,6),[identifier(p3(118,32,42),rule_names)],sequence(p5(1,119,5,129,8),[operation_call(p3(119,5,46),identifier(p3(119,5,46),event_happened),[identifier(p3(119,5,15),rule_names)],[identifier(p3(119,33,39),assess),identifier(p3(119,41,46),actor)]),if(p5(1,121,5,129,8),member(p3(121,8,31),identifier(p3(121,8,18),'Assessment'),identifier(p3(121,21,31),rule_names)),sequence(p5(1,124,7,128,10),[becomes_element_of(p3(124,7,28),[identifier(p3(124,7,20),is_notifiable)],bool_set(p3(124,24,28))),if(p5(1,126,7,128,10),equal(p3(126,10,30),identifier(p3(126,10,23),is_notifiable),boolean_true(p3(126,26,30))),operation_call(p3(127,9,16),identifier(p3(127,9,16),trigger),[],[set_extension(p3(127,17,60),[couple(p3(127,18,37),[identifier(p3(127,19,29),'NotifyPdpc'),identifier(p3(127,31,36),actor)]),couple(p3(127,39,59),[identifier(p3(127,40,51),'NotifyIndiv'),identifier(p3(127,53,58),actor)])])]),[],skip(none))]),[],skip(none))]))),operation(p5(1,132,3,134,6),identifier(p5(1,132,3,134,6),assess_timeout),[],[identifier(p3(132,18,23),actor)],var(p5(1,132,27,134,6),[identifier(p3(132,31,41),rule_names)],operation_call(p3(133,5,45),identifier(p3(133,5,45),event_timeout),[identifier(p3(133,5,15),rule_names)],[identifier(p3(133,32,38),assess),identifier(p3(133,40,45),actor)]))),operation(p5(1,136,3,138,6),identifier(p5(1,136,3,138,6),notify_indiv_happened),[],[identifier(p3(136,25,30),actor)],var(p5(1,136,34,138,6),[identifier(p3(136,38,48),rule_names)],operation_call(p3(137,5,52),identifier(p3(137,5,52),event_happened),[identifier(p3(137,5,15),rule_names)],[identifier(p3(137,33,45),notify_indiv),identifier(p3(137,47,52),actor)]))),operation(p5(1,140,3,142,6),identifier(p5(1,140,3,142,6),notify_indiv_timeout),[],[identifier(p3(140,24,29),actor)],var(p5(1,140,33,142,6),[identifier(p3(140,37,47),rule_names)],operation_call(p3(141,5,51),identifier(p3(141,5,51),event_timeout),[identifier(p3(141,5,15),rule_names)],[identifier(p3(141,32,44),notify_indiv),identifier(p3(141,46,51),actor)]))),operation(p5(1,144,3,150,6),identifier(p5(1,144,3,150,6),notify_pdpc_happened),[],[identifier(p3(144,24,29),actor)],var(p5(1,144,33,150,6),[identifier(p3(144,37,47),rule_names)],sequence(p5(1,145,5,149,8),[operation_call(p3(145,5,51),identifier(p3(145,5,51),event_happened),[identifier(p3(145,5,15),rule_names)],[identifier(p3(145,33,44),notify_pdpc),identifier(p3(145,46,51),actor)]),if(p5(1,147,5,149,8),member(p3(147,8,31),identifier(p3(147,8,18),'NotifyPdpc'),identifier(p3(147,21,31),rule_names)),operation_call(p3(148,7,14),identifier(p3(148,7,14),trigger),[],[set_extension(p3(148,15,44),[couple(p3(148,16,43),[identifier(p3(148,17,36),'ProhibitNotifyIndiv'),identifier(p3(148,38,42),pdpc)])])]),[],skip(none))]))),operation(p5(1,152,3,154,6),identifier(p5(1,152,3,154,6),notify_pdpc_timeout),[],[identifier(p3(152,23,28),actor)],var(p5(1,152,32,154,6),[identifier(p3(152,36,46),rule_names)],operation_call(p3(153,5,50),identifier(p3(153,5,50),event_timeout),[identifier(p3(153,5,15),rule_names)],[identifier(p3(153,32,43),notify_pdpc),identifier(p3(153,45,50),actor)]))),operation(p5(1,156,3,164,6),identifier(p5(1,156,3,164,6),prohibit_notify_indiv_happened),[],[identifier(p3(156,34,39),actor)],var(p5(1,156,43,164,6),[identifier(p3(156,47,57),rule_names)],sequence(p5(1,157,5,163,8),[operation_call(p3(157,5,61),identifier(p3(157,5,61),event_happened),[identifier(p3(157,5,15),rule_names)],[identifier(p3(157,33,54),prohibit_notify_indiv),identifier(p3(157,56,61),actor)]),if(p5(1,159,5,163,8),member(p3(159,8,40),identifier(p3(159,8,27),'ProhibitNotifyIndiv'),identifier(p3(159,30,40),rule_names)),sequence(p5(1,160,7,162,41),[operation_call(p3(160,7,16),identifier(p3(160,7,16),discharge),[],[set_extension(p3(160,17,37),[couple(p3(160,18,36),[identifier(p3(160,19,30),'NotifyIndiv'),identifier(p3(160,32,35),org)])])]),operation_call(p3(162,7,14),identifier(p3(162,7,14),trigger),[],[set_extension(p3(162,15,41),[couple(p3(162,16,40),[identifier(p3(162,17,34),'CannotNotifyIndiv'),identifier(p3(162,36,39),org)])])])]),[],skip(none))]))),operation(p5(1,166,3,168,6),identifier(p5(1,166,3,168,6),prohibit_notify_indiv_timeout),[],[identifier(p3(166,33,38),actor)],var(p5(1,166,42,168,6),[identifier(p3(166,46,56),rule_names)],operation_call(p3(167,5,60),identifier(p3(167,5,60),event_timeout),[identifier(p3(167,5,15),rule_names)],[identifier(p3(167,32,53),prohibit_notify_indiv),identifier(p3(167,55,60),actor)])))])])).
